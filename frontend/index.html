<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4K Movie Streaming & Video Conferencing App</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1>üé¨ StreamVerse</h1>
                <p>4K/1080p Streaming with Real-time Video Conferencing</p>
            </div>
            <div class="connection-status">
                <span id="status-indicator" class="status-dot"></span>
                <span id="status-text">Disconnected</span>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Left Panel: Video Streams -->
            <div class="video-panel">
                <div class="main-stream-container">
                    <video id="main-video" class="main-video" playsinline autoplay muted></video>
                    <div class="video-overlay">
                        <span id="video-quality" class="quality-badge">1080p60</span>
                        <div id="network-stats" class="network-stats">
                            <div>üì° Bitrate: <span id="bitrate">0</span> kbps</div>
                            <div>üìä Buffer: <span id="buffer">10</span>s</div>
                            <div>üåê Ping: <span id="ping">0</span>ms</div>
                        </div>
                    </div>
                </div>

                <!-- Participant Videos -->
                <div class="participants-grid" id="participants-grid">
                    <!-- Participant video elements will be added dynamically -->
                </div>
            </div>

            <!-- Right Panel: Controls & Chat -->
            <div class="control-panel">
                <!-- Stream Controls -->
                <div class="card controls-card">
                    <h3>Stream Controls</h3>
                    <div class="control-group">
                        <input type="text" id="stream-title" placeholder="Enter stream title..." class="input-field">
                        <div id="stream-id-display" style="background: #1a1a2e; padding: 10px; border-radius: 5px; margin: 10px 0; display: none;">
                            <small style="color: #888;">Stream ID:</small><br>
                            <code id="stream-id-code" style="color: #00d4ff; word-break: break-all;"></code>
                            <button id="copy-stream-id-btn" class="btn btn-small" style="margin-top: 5px; width: 100%;">üìã Copy Stream ID</button>
                        </div>
                        <div class="quality-selector">
                            <label>Quality:</label>
                            <select id="quality-select" class="select-field">
                                <option value="4k60">4K 60fps</option>
                                <option value="1080p60" selected>1080p 60fps</option>
                                <option value="720p60">720p 60fps</option>
                                <option value="480p30">480p 30fps</option>
                                <option value="360p30">360p 30fps</option>
                            </select>
                        </div>
                        <div class="button-group">
                            <button id="start-stream-btn" class="btn btn-primary">Start Stream</button>
                            <button id="stop-stream-btn" class="btn btn-danger" disabled>Stop Stream</button>
                        </div>
                    </div>
                </div>

                <!-- Join Stream Section -->
                <div class="card join-card">
                    <h3>Join a Stream</h3>
                    <div class="control-group">
                        <input type="text" id="join-stream-id" placeholder="Paste stream ID here..." class="input-field">
                        <input type="text" id="participant-name" placeholder="Your name..." class="input-field">
                        <button id="join-stream-btn" class="btn btn-primary">Join Stream</button>
                    </div>
                    <div id="join-status" style="margin-top: 10px; padding: 10px; border-radius: 5px; display: none; background: #1a3a1a; color: #00ff00;"></div>
                </div>

                <!-- Media Controls -->
                <div class="card media-card">
                    <h3>Media Controls</h3>
                    <div class="button-group">
                        <button id="toggle-video-btn" class="btn btn-secondary">üìπ Enable Video</button>
                        <button id="toggle-audio-btn" class="btn btn-secondary">üé§ Enable Audio</button>
                        <button id="toggle-screen-btn" class="btn btn-secondary">üñ•Ô∏è Share Screen</button>
                    </div>
                </div>

                <!-- Network Info -->
                <div class="card network-card">
                    <h3>Network Information</h3>
                    <div class="stat-item">
                        <label>Bandwidth:</label>
                        <span id="bandwidth-info">0 kbps</span>
                    </div>
                    <div class="stat-item">
                        <label>Packet Loss:</label>
                        <span id="packet-loss-info">0%</span>
                    </div>
                    <div class="stat-item">
                        <label>Jitter:</label>
                        <span id="jitter-info">0 ms</span>
                    </div>
                    <div class="stat-item">
                        <label>Quality Score:</label>
                        <span id="quality-score">0/100</span>
                    </div>
                    <div class="optimization-tips" id="optimization-tips"></div>
                </div>

                <!-- Chat -->
                <div class="card chat-card">
                    <h3>Chat</h3>
                    <div class="chat-messages" id="chat-messages"></div>
                    <div class="chat-input-group">
                        <input type="text" id="chat-input" placeholder="Type message..." class="input-field">
                        <button id="send-message-btn" class="btn btn-small">Send</button>
                    </div>
                </div>

                <!-- Participants List -->
                <div class="card participants-card">
                    <h3>Participants (<span id="participant-count">0</span>)</h3>
                    <div class="participants-list" id="participants-list"></div>
                </div>
            </div>
        </main>

        <!-- Modal: Join Stream -->
        <div id="join-modal" class="modal">
            <div class="modal-content">
                <h2>Join Stream</h2>
                <div class="form-group">
                    <input type="text" id="join-stream-id" placeholder="Enter stream ID..." class="input-field">
                    <input type="text" id="join-user-name" placeholder="Enter your name..." class="input-field">
                    <div class="button-group">
                        <button id="join-btn" class="btn btn-primary">Join Stream</button>
                        <button id="close-modal-btn" class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="js/webrtcManager.js"></script>
    <script src="js/networkManager.js"></script>
    <script src="js/uiManager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
